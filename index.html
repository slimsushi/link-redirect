<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Listening Test Redirect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    // Your AidaForm survey variants
    const surveys = [
      "https://golisten.ucd.ie/task/mushra-test/68bc320dee8461aa467d3ef5",
      "https://golisten.ucd.ie/task/mushra-test/68bc320eee8461aa467d3ef6",
      "https://golisten.ucd.ie/task/mushra-test/68bc320fee8461aa467d3ef7",
      "https://golisten.ucd.ie/task/mushra-test/68bd601bee8461aa467d3ef9"
    ];

    // Pick a random URL each visit
    function pickRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // Build redirect URL with a small cache-busting marker
    function withMarker(url) {
      const marker = "src=router&ts=" + Date.now();
      return url + (url.includes("?") ? "&" : "?") + marker;
    }

    // Perform redirect after a short tick (so we can log)
    document.addEventListener("DOMContentLoaded", () => {
      const choice = pickRandom(surveys);
      const target = withMarker(choice);
      // Log to console for debugging
      try { console.log("[redirect] chosen:", choice); } catch(e) {}
      // Update visible fallback link so you can see the pick
      const a = document.getElementById("link");
      a.href = target;
      a.textContent = "Click here if you are not redirected: " + choice;
      // Redirect
      setTimeout(() => { window.location.replace(target); }, 50);
    });
  </script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 2rem; }
  </style>
</head>
<body>
  <p>Redirecting to the surveyâ€¦</p>
  <p><a id="link" href="#">Click here if you are not redirected.</a></p>
  <p>If you keep landing on the same variant: hard-refresh (Ctrl/Cmd+Shift+R) or try an incognito window.</p>
</body>
</html>