<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Listening Test Redirect — v3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script>
    const surveys = [
      "https://slimsushi.aidaform.com/audio-umfrage-1",
      "https://slimsushi.aidaform.com/audio-umfrage-2",
      "https://slimsushi.aidaform.com/audio-umfrage-3",
      "https://slimsushi.aidaform.com/audio-umfrage-4",
      "https://slimsushi.aidaform.com/audio-umfrage-5"
    ];

    function pickRandom(arr) {
      const i = Math.floor(Math.random() * arr.length);
      try { console.log("[redirect] n =", arr.length, "idx =", i, "url =", arr[i]); } catch(e) {}
      return arr[i];
    }
    function withMarker(url) {
      const marker = "src=router&ts=" + Date.now();
      return url + (url.includes("?") ? "&" : "?") + marker;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const choice = pickRandom(surveys);
      const target = withMarker(choice);
      const a = document.getElementById("link");
      a.href = target;
      a.textContent = "Click here if you are not redirected: " + choice;
      setTimeout(() => { window.location.replace(target); }, 120);
    });
  </script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 2rem; }
    .v { opacity: .7 }
  </style>
</head>
<body>
  <p class="v">Version: <strong>v3</strong></p>
  <p>Redirecting to the survey…</p>
  <p><a id="link" href="#">Click here if you are not redirected.</a></p>
  <p>If you keep landing on the same variant: hard-refresh (Ctrl/Cmd+Shift+R) or use an incognito window.</p>
</body>
</html>
